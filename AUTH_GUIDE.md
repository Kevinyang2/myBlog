# 博客身份验证功能使用指南

## 🔐 功能概述

您的博客现在已经集成了完整的用户注册登录功能，保护管理页面只有登录用户可以访问。

## ✨ 新增功能

### 1. 用户注册
- 访问：`/auth/signup`
- 需要：姓名、邮箱、密码（至少6位）
- 密码加密存储，安全可靠

### 2. 用户登录
- 访问：`/auth/signin`
- 使用邮箱和密码登录
- 登录后跳转到管理页面

### 3. 受保护的管理页面
- 只有登录用户可以访问 `/admin`
- 未登录会自动跳转到登录页面
- 可以创建、编辑、删除文章

### 4. 登出功能
- 右上角显示用户名和登出按钮
- 一键安全退出

## 🚀 使用步骤

### 第一次使用：

1. **启动开发服务器**：
   ```bash
   npm run dev
   ```

2. **注册管理员账号**：
   - 访问 http://localhost:3000/auth/signup
   - 填写您的信息并注册

3. **登录账号**：
   - 注册成功后会跳转到登录页面
   - 使用刚才注册的邮箱和密码登录

4. **开始管理博客**：
   - 登录后自动跳转到管理页面
   - 可以创建、编辑文章

### 日常使用：

1. **写文章**：
   - 点击导航栏的"写文章"
   - 如果未登录，会要求先登录
   - 登录后即可创建新文章

2. **管理现有文章**：
   - 在管理页面查看所有文章
   - 点击编辑图标修改文章
   - 点击删除图标删除文章
   - 点击眼睛图标预览文章

## 📁 数据存储

- **用户数据**：存储在 `data/users.json`
- **文章数据**：仍然存储在 `posts/` 目录的 `.md` 文件中
- **密码安全**：使用 bcrypt 加密，不会存储明文密码

## 🛡️ 安全特性

1. **密码加密**：所有密码使用 bcrypt 哈希加密
2. **会话管理**：使用 JWT token 管理用户会话
3. **路由保护**：未登录用户无法访问管理功能
4. **输入验证**：前后端双重验证用户输入

## 🌐 部署注意事项

### 生产环境设置：

1. **环境变量**（在 Vercel 或其他平台设置）：
   ```
   NEXTAUTH_URL=https://your-domain.com
   NEXTAUTH_SECRET=your-super-secret-key-here
   ```

2. **生成安全密钥**：
   ```bash
   openssl rand -base64 32
   ```

3. **域名配置**：
   - 将 `NEXTAUTH_URL` 设置为您的实际域名
   - 确保 HTTPS 启用（生产环境必需）

## 📱 移动端支持

所有身份验证页面都完全支持移动设备：
- 响应式设计
- 触摸友好的界面
- 移动端可以正常登录和管理文章

## 🔧 自定义配置

### 修改用户字段：
编辑 `app/api/auth/register/route.ts` 添加更多用户信息字段

### 修改认证提供商：
编辑 `app/api/auth/[...nextauth]/route.ts` 添加 Google、GitHub 等第三方登录

### 自定义登录页面：
修改 `app/auth/signin/page.tsx` 来调整登录页面样式

## 🆘 常见问题

### Q: 忘记密码怎么办？
A: 目前需要直接编辑 `data/users.json` 文件，或者可以添加密码重置功能

### Q: 可以有多个管理员吗？
A: 可以，每个注册的用户都可以管理文章

### Q: 如何限制注册？
A: 可以在注册 API 中添加邀请码验证逻辑

## 🎯 下一步

您的博客现在具有完整的用户管理功能！可以安全地：
1. 注册管理员账号
2. 登录后写文章
3. 管理所有博客内容
4. 部署到生产环境

开始使用您的安全博客系统吧！ 🎉 